{% extends 'base.html' %}

{% block title %}Property Management{% endblock %}
{% block header %}Properties{% endblock %}

{% block content %}
{% for investor in investors %}
<h2>{{ investor.name }}</h2>
        {% for property in investor.properties %}
            <div class="container">
                <div class="row">
                  <div class="col-md-6 mb-4">
                    <div class="card p-4 shadow-sm border rounded">
                      <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="badge bg-{{ 'success' if property.is_vacant else 'secondary' }}">
                          {{ 'Vacant' if property.tenant else 'Rented' }}
                        </span>
                      </div>
                      <h5 class="card-title text-primary">
                        <i class="bi bi-house-door"></i> {{ property.building_name }} {{ property.unit_no }}
                      </h5>
                      {% if property.tenant %}
                        {% for tenant in property.tenant %}
                        <p class="mb-1">Occupied by: {{ property.tenant.name }}</p>
                        {% else %}
                        <p class="mb-1 text-muted">No current tenant</p>
                        {% endfor %}
                      {% endif %}
                      <hr />
                      <div class="d-flex justify-content-between">
                        <p class="text-muted">Rent excluding tax and expenses</p>
                        <h5 class="fw-bold">AED {{ property.rental_amount or '0' }}</h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
        {% endfor %}              
{% endfor %}
{% endblock %}